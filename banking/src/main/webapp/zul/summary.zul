<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>
<zk>
	<div apply="org.zkoss.bind.BindComposer"
		viewModel="@id('vm') @init('viewmodel.SummaryVM')">
		<vlayout>
			<vlayout>
				<hlayout>
					<button label="Refresh"
						onClick="@command('refresh')" />
					<button label="Clear" onClick="@command('clear')" />
				</hlayout>
				<listbox model="@bind(vm.summaries)" mold="paging"
					pageSize="10" hflex="max">
					<listhead>
						<listheader label="Type" width="200px" />
						<listheader label="Category"  />
						<listheader label="Amount" align="right"/>
						<listheader label="Tax" align="right"/>
					</listhead>
					<auxhead>
						<auxheader>
							<selectbox model="@bind(vm.types)"
								selectedItem="@bind(vm.filter.type)"
								onSelect="@command('refresh')">
								<template name="model">
									<label value="@bind(each)" />
								</template>
							</selectbox>
						</auxheader>
						<auxheader>
							<selectbox model="@bind(vm.categories)"
								selectedItem="@bind(vm.filter.category)"
								onSelect="@command('refresh')">
								<template name="model">
									<label value="@bind(each)" />
								</template>
							</selectbox>
						</auxheader>
						<auxheader />
						<auxheader/>
					</auxhead>
					<template name="model">
						<listitem height="28px">
							<listcell label="@load(each.type)" />
							<listcell label="@load(each.category)" />
							<listcell label="@load(each.amount) @converter('formatedNumber', format='###,##0')" />
							<listcell label="@load(each.deductable) @converter('formatedNumber', format='###,##0')" />
						</listitem>
					</template>
				</listbox>
			</vlayout>
		</vlayout>
	</div>
</zk>
